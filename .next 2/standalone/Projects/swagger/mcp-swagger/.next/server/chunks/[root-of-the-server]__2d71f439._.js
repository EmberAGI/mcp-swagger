module.exports=[57176,(e,t,r)=>{t.exports=n,n.sync=function(e,t){return s(a.statSync(e),t)};var a=e.r(22734);function n(e,t,r){a.stat(e,function(e,a){r(e,!e&&s(a,t))})}function s(e,t){var r,a,n,s,i,o,l,d,u;return e.isFile()&&(r=e,a=t,n=r.mode,s=r.uid,i=r.gid,o=void 0!==a.uid?a.uid:process.getuid&&process.getuid(),l=void 0!==a.gid?a.gid:process.getgid&&process.getgid(),d=parseInt("100",8),u=parseInt("010",8),n&parseInt("001",8)||n&u&&i===l||n&d&&s===o||n&(d|u)&&0===o)}},3924,(e,t,r)=>{t.exports=s,s.sync=function(e,t){return n(a.statSync(e),e,t)};var a=e.r(22734);function n(e,t,r){if(!e.isSymbolicLink()&&!e.isFile())return!1;var a=void 0!==r.pathExt?r.pathExt:process.env.PATHEXT;if(!a||-1!==(a=a.split(";")).indexOf(""))return!0;for(var n=0;n<a.length;n++){var s=a[n].toLowerCase();if(s&&t.substr(-s.length).toLowerCase()===s)return!0}return!1}function s(e,t,r){a.stat(e,function(a,s){r(a,!a&&n(s,e,t))})}},55105,(e,t,r)=>{var a;function n(e,t,r){if("function"==typeof t&&(r=t,t={}),!r){if("function"!=typeof Promise)throw TypeError("callback not provided");return new Promise(function(r,a){n(e,t||{},function(e,t){e?a(e):r(t)})})}a(e,t||{},function(e,a){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,a=!1),r(e,a)})}e.r(22734),a="win32"===process.platform||e.g.TESTING_WINDOWS?e.r(3924):e.r(57176),t.exports=n,n.sync=function(e,t){try{return a.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},76192,(e,t,r)=>{let a="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,n=e.r(14747),s=a?";":":",i=e.r(55105),o=e=>Object.assign(Error(`not found: ${e}`),{code:"ENOENT"}),l=(e,t)=>{let r=t.colon||s,n=e.match(/\//)||a&&e.match(/\\/)?[""]:[...a?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],i=a?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=a?i.split(r):[""];return a&&-1!==e.indexOf(".")&&""!==o[0]&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},d=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),t||(t={});let{pathEnv:a,pathExt:s,pathExtExe:d}=l(e,t),u=[],c=r=>new Promise((s,i)=>{if(r===a.length)return t.all&&u.length?s(u):i(o(e));let l=a[r],d=/^".*"$/.test(l)?l.slice(1,-1):l,c=n.join(d,e);s(p(!d&&/^\.[\\\/]/.test(e)?e.slice(0,2)+c:c,r,0))}),p=(e,r,a)=>new Promise((n,o)=>{if(a===s.length)return n(c(r+1));let l=s[a];i(e+l,{pathExt:d},(s,i)=>{if(!s&&i)if(!t.all)return n(e+l);else u.push(e+l);return n(p(e,r,a+1))})});return r?c(0).then(e=>r(null,e),r):c(0)};t.exports=d,d.sync=(e,t)=>{let{pathEnv:r,pathExt:a,pathExtExe:s}=l(e,t=t||{}),d=[];for(let o=0;o<r.length;o++){let l=r[o],u=/^".*"$/.test(l)?l.slice(1,-1):l,c=n.join(u,e),p=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+c:c;for(let e=0;e<a.length;e++){let r=p+a[e];try{if(i.sync(r,{pathExt:s}))if(!t.all)return r;else d.push(r)}catch(e){}}}if(t.all&&d.length)return d;if(t.nothrow)return null;throw o(e)}},36710,(e,t,r)=>{"use strict";let a=(e={})=>{let t=e.env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).reverse().find(e=>"PATH"===e.toUpperCase())||"Path"};t.exports=a,t.exports.default=a},20159,(e,t,r)=>{"use strict";let a=e.r(14747),n=e.r(76192),s=e.r(36710);function i(e,t){let r,i=e.options.env||process.env,o=process.cwd(),l=null!=e.options.cwd,d=l&&void 0!==process.chdir&&!process.chdir.disabled;if(d)try{process.chdir(e.options.cwd)}catch(e){}try{r=n.sync(e.command,{path:i[s({env:i})],pathExt:t?a.delimiter:void 0})}catch(e){}finally{d&&process.chdir(o)}return r&&(r=a.resolve(l?e.options.cwd:"",r)),r}t.exports=function(e){return i(e)||i(e,!0)}},98246,(e,t,r)=>{"use strict";let a=/([()\][%!^"`<>&|;, *?])/g;t.exports.command=function(e){return e.replace(a,"^$1")},t.exports.argument=function(e,t){return e=(e=(e=`${e}`).replace(/(?=(\\+?)?)\1"/g,'$1$1\\"')).replace(/(?=(\\+?)?)\1$/,"$1$1"),e=(e=`"${e}"`).replace(a,"^$1"),t&&(e=e.replace(a,"^$1")),e}},24656,(e,t,r)=>{"use strict";t.exports=/^#!(.*)/},33928,(e,t,r)=>{"use strict";let a=e.r(24656);t.exports=(e="")=>{let t=e.match(a);if(!t)return null;let[r,n]=t[0].replace(/#! ?/,"").split(" "),s=r.split("/").pop();return"env"===s?n:n?`${s} ${n}`:s}},79673,(e,t,r)=>{"use strict";let a=e.r(22734),n=e.r(33928);t.exports=function(e){let t,r=Buffer.alloc(150);try{t=a.openSync(e,"r"),a.readSync(t,r,0,150,0),a.closeSync(t)}catch(e){}return n(r.toString())}},1436,(e,t,r)=>{"use strict";e.r(14747),e.r(20159),e.r(98246),e.r(79673),process.platform,t.exports=function(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null);let a={command:e,args:t=t?t.slice(0):[],options:r=Object.assign({},r),file:void 0,original:{command:e,args:t}};return r.shell,a}},93454,(e,t,r)=>{"use strict";process.platform,t.exports={hookChildProcess:function(e,t){},verifyENOENT:function(e,t){return null},verifyENOENTSync:function(e,t){return null},notFoundError:function(e,t){return Object.assign(Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}}},52543,(e,t,r)=>{"use strict";let a=e.r(33405),n=e.r(1436),s=e.r(93454);function i(e,t,r){let i=n(e,t,r),o=a.spawn(i.command,i.args,i.options);return s.hookChildProcess(o,i),o}t.exports=i,t.exports.spawn=i,t.exports.sync=function(e,t,r){let i=n(e,t,r),o=a.spawnSync(i.command,i.args,i.options);return o.error=o.error||s.verifyENOENTSync(o.status,i),o},t.exports._parse=n,t.exports._enoent=s},59639,(e,t,r)=>{t.exports=e.x("node:process",()=>require("node:process"))},81111,(e,t,r)=>{t.exports=e.x("node:stream",()=>require("node:stream"))},16435,5666,69316,e=>{"use strict";let t,r;e.s(["StreamableHTTPClientTransport",()=>a$],16435),e.s(["DEFAULT_NEGOTIATED_PROTOCOL_VERSION",()=>t_,"JSONRPCMessageSchema",()=>tN,"LATEST_PROTOCOL_VERSION",()=>tf,"SUPPORTED_PROTOCOL_VERSIONS",()=>tg,"isInitializeRequest",()=>tF,"isInitializedNotification",()=>tH,"isJSONRPCError",()=>tR,"isJSONRPCRequest",()=>tO,"isJSONRPCResponse",()=>tA],5666),e.s(["BRAND",()=>eE,"DIRTY",()=>g,"EMPTY_PATH",()=>h,"INVALID",()=>_,"NEVER",()=>tl,"OK",()=>y,"ParseStatus",()=>f,"Schema",()=>E,"ZodAny",()=>Q,"ZodArray",()=>ea,"ZodBigInt",()=>W,"ZodBoolean",()=>K,"ZodBranded",()=>eZ,"ZodCatch",()=>eT,"ZodDate",()=>J,"ZodDefault",()=>ek,"ZodDiscriminatedUnion",()=>eo,"ZodEffects",()=>eb,"ZodEnum",()=>eg,"ZodError",()=>o,"ZodFirstPartyTypeKind",()=>tp,"ZodFunction",()=>eh,"ZodIntersection",()=>el,"ZodIssueCode",()=>s,"ZodLazy",()=>em,"ZodLiteral",()=>ef,"ZodMap",()=>ec,"ZodNaN",()=>eC,"ZodNativeEnum",()=>ey,"ZodNever",()=>et,"ZodNull",()=>X,"ZodNullable",()=>ex,"ZodNumber",()=>B,"ZodObject",()=>en,"ZodOptional",()=>ew,"ZodParsedType",()=>a,"ZodPipeline",()=>eO,"ZodPromise",()=>ev,"ZodReadonly",()=>ej,"ZodRecord",()=>eu,"ZodSchema",()=>E,"ZodSet",()=>ep,"ZodString",()=>H,"ZodSymbol",()=>Y,"ZodTransformer",()=>eb,"ZodTuple",()=>ed,"ZodType",()=>E,"ZodUndefined",()=>G,"ZodUnion",()=>es,"ZodUnknown",()=>ee,"ZodVoid",()=>er,"addIssueToContext",()=>m,"any",()=>eV,"array",()=>eW,"bigint",()=>eU,"boolean",()=>eL,"coerce",()=>to,"custom",()=>eA,"date",()=>eM,"datetimeRegex",()=>q,"defaultErrorMap",()=>l,"discriminatedUnion",()=>eG,"effect",()=>e8,"enum",()=>e5,"function",()=>e4,"getErrorMap",()=>c,"getParsedType",()=>n,"instanceof",()=>eR,"intersection",()=>eX,"isAborted",()=>v,"isAsync",()=>x,"isDirty",()=>b,"isValid",()=>w,"late",()=>eP,"lazy",()=>e2,"literal",()=>e3,"makeIssue",()=>p,"map",()=>e1,"nan",()=>e$,"nativeEnum",()=>e6,"never",()=>eH,"null",()=>ez,"nullable",()=>tt,"number",()=>eI,"object",()=>eK,"objectUtil",()=>tu,"oboolean",()=>ti,"onumber",()=>ts,"optional",()=>te,"ostring",()=>tn,"pipeline",()=>ta,"preprocess",()=>tr,"promise",()=>e7,"quotelessJson",()=>i,"record",()=>e0,"set",()=>e9,"setErrorMap",()=>u,"strictObject",()=>eJ,"string",()=>eN,"symbol",()=>eD,"transformer",()=>e8,"tuple",()=>eQ,"undefined",()=>eF,"union",()=>eY,"unknown",()=>eq,"util",()=>td,"void",()=>eB],39940),e.s([],4033),e.i(4033),e.s(["defaultErrorMap",()=>l,"getErrorMap",()=>c,"setErrorMap",()=>u],64455),e.s(["getErrorMap",()=>c,"setErrorMap",()=>u],63729),e.s(["ZodError",()=>o,"ZodIssueCode",()=>s,"quotelessJson",()=>i],98700),e.s(["ZodParsedType",()=>a,"getParsedType",()=>n,"objectUtil",()=>tu,"util",()=>td],11414),function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),a={};for(let e of r)a[e]=t[e];return e.objectValues(a)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(td||(td={})),(tu||(tu={})).mergeShapes=(e,t)=>({...e,...t});let a=td.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),n=e=>{switch(typeof e){case"undefined":return a.undefined;case"string":return a.string;case"number":return Number.isNaN(e)?a.nan:a.number;case"boolean":return a.boolean;case"function":return a.function;case"bigint":return a.bigint;case"symbol":return a.symbol;case"object":if(Array.isArray(e))return a.array;if(null===e)return a.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return a.promise;if("undefined"!=typeof Map&&e instanceof Map)return a.map;if("undefined"!=typeof Set&&e instanceof Set)return a.set;if("undefined"!=typeof Date&&e instanceof Date)return a.date;return a.object;default:return a.unknown}},s=td.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),i=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class o extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},a=e=>{for(let n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(a);else if("invalid_return_type"===n.code)a(n.returnTypeError);else if("invalid_arguments"===n.code)a(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,a=0;for(;a<n.path.length;){let r=n.path[a];a===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],a++}}};return a(this),r}static assert(e){if(!(e instanceof o))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,td.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let a of this.issues)if(a.path.length>0){let r=a.path[0];t[r]=t[r]||[],t[r].push(e(a))}else r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}o.create=e=>new o(e);let l=(e,t)=>{let r;switch(e.code){case s.invalid_type:r=e.received===a.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case s.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,td.jsonStringifyReplacer)}`;break;case s.unrecognized_keys:r=`Unrecognized key(s) in object: ${td.joinValues(e.keys,", ")}`;break;case s.invalid_union:r="Invalid input";break;case s.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${td.joinValues(e.options)}`;break;case s.invalid_enum_value:r=`Invalid enum value. Expected ${td.joinValues(e.options)}, received '${e.received}'`;break;case s.invalid_arguments:r="Invalid function arguments";break;case s.invalid_return_type:r="Invalid function return type";break;case s.invalid_date:r="Invalid date";break;case s.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:td.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case s.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case s.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case s.custom:r="Invalid input";break;case s.invalid_intersection_types:r="Intersection results could not be merged";break;case s.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case s.not_finite:r="Number must be finite";break;default:r=t.defaultError,td.assertNever(e)}return{message:r}},d=l;function u(e){d=e}function c(){return d}e.i(63729),e.i(64455),e.s(["DIRTY",()=>g,"EMPTY_PATH",()=>h,"INVALID",()=>_,"OK",()=>y,"ParseStatus",()=>f,"addIssueToContext",()=>m,"isAborted",()=>v,"isAsync",()=>x,"isDirty",()=>b,"isValid",()=>w,"makeIssue",()=>p],82819);let p=e=>{let{data:t,path:r,errorMaps:a,issueData:n}=e,s=[...r,...n.path||[]],i={...n,path:s};if(void 0!==n.message)return{...n,path:s,message:n.message};let o="";for(let e of a.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return{...n,path:s,message:o}},h=[];function m(e,t){let r=d,a=p({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===l?void 0:l].filter(e=>!!e)});e.common.issues.push(a)}class f{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let a of t){if("aborted"===a.status)return _;"dirty"===a.status&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,a=await e.value;r.push({key:t,value:a})}return f.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let a of t){let{key:t,value:n}=a;if("aborted"===t.status||"aborted"===n.status)return _;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==n.value||a.alwaysSet)&&(r[t.value]=n.value)}return{status:e.value,value:r}}}let _=Object.freeze({status:"aborted"}),g=e=>({status:"dirty",value:e}),y=e=>({status:"valid",value:e}),v=e=>"aborted"===e.status,b=e=>"dirty"===e.status,w=e=>"valid"===e.status,x=e=>"undefined"!=typeof Promise&&e instanceof Promise;e.i(82819),e.s([],664),e.i(664),e.i(11414),e.s(["BRAND",()=>eE,"NEVER",()=>tl,"Schema",()=>E,"ZodAny",()=>Q,"ZodArray",()=>ea,"ZodBigInt",()=>W,"ZodBoolean",()=>K,"ZodBranded",()=>eZ,"ZodCatch",()=>eT,"ZodDate",()=>J,"ZodDefault",()=>ek,"ZodDiscriminatedUnion",()=>eo,"ZodEffects",()=>eb,"ZodEnum",()=>eg,"ZodFirstPartyTypeKind",()=>tp,"ZodFunction",()=>eh,"ZodIntersection",()=>el,"ZodLazy",()=>em,"ZodLiteral",()=>ef,"ZodMap",()=>ec,"ZodNaN",()=>eC,"ZodNativeEnum",()=>ey,"ZodNever",()=>et,"ZodNull",()=>X,"ZodNullable",()=>ex,"ZodNumber",()=>B,"ZodObject",()=>en,"ZodOptional",()=>ew,"ZodPipeline",()=>eO,"ZodPromise",()=>ev,"ZodReadonly",()=>ej,"ZodRecord",()=>eu,"ZodSchema",()=>E,"ZodSet",()=>ep,"ZodString",()=>H,"ZodSymbol",()=>Y,"ZodTransformer",()=>eb,"ZodTuple",()=>ed,"ZodType",()=>E,"ZodUndefined",()=>G,"ZodUnion",()=>es,"ZodUnknown",()=>ee,"ZodVoid",()=>er,"any",()=>eV,"array",()=>eW,"bigint",()=>eU,"boolean",()=>eL,"coerce",()=>to,"custom",()=>eA,"date",()=>eM,"datetimeRegex",()=>q,"discriminatedUnion",()=>eG,"effect",()=>e8,"enum",()=>e5,"function",()=>e4,"instanceof",()=>eR,"intersection",()=>eX,"late",()=>eP,"lazy",()=>e2,"literal",()=>e3,"map",()=>e1,"nan",()=>e$,"nativeEnum",()=>e6,"never",()=>eH,"null",()=>ez,"nullable",()=>tt,"number",()=>eI,"object",()=>eK,"oboolean",()=>ti,"onumber",()=>ts,"optional",()=>te,"ostring",()=>tn,"pipeline",()=>ta,"preprocess",()=>tr,"promise",()=>e7,"record",()=>e0,"set",()=>e9,"strictObject",()=>eJ,"string",()=>eN,"symbol",()=>eD,"transformer",()=>e8,"tuple",()=>eQ,"undefined",()=>eF,"union",()=>eY,"unknown",()=>eq,"void",()=>eB],35997),function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(tc||(tc={}));class k{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let T=(e,t)=>{if(w(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new o(e.common.issues);return this._error=t,this._error}}};function C(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:a,description:n}=e;if(t&&(r||a))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(t,n)=>{let{message:s}=e;return"invalid_enum_value"===t.code?{message:s??n.defaultError}:void 0===n.data?{message:s??a??n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:s??r??n.defaultError}},description:n}}class E{get description(){return this._def.description}_getType(e){return n(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:n(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new f,ctx:{common:e.parent.common,data:e.data,parsedType:n(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(x(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:n(e)},a=this._parseSync({data:e,path:r.path,parent:r});return T(r,a)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:n(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return w(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>w(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:n(e)},a=this._parse({data:e,path:r.path,parent:r});return T(r,await (x(a)?a:Promise.resolve(a)))}refine(e,t){return this._refinement((r,a)=>{let n=e(r),i=()=>a.addIssue({code:s.custom,..."string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(r):t});return"undefined"!=typeof Promise&&n instanceof Promise?n.then(e=>!!e||(i(),!1)):!!n||(i(),!1)})}refinement(e,t){return this._refinement((r,a)=>!!e(r)||(a.addIssue("function"==typeof t?t(r,a):t),!1))}_refinement(e){return new eb({schema:this,typeName:tp.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return ew.create(this,this._def)}nullable(){return ex.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ea.create(this)}promise(){return ev.create(this,this._def)}or(e){return es.create([this,e],this._def)}and(e){return el.create(this,e,this._def)}transform(e){return new eb({...C(this._def),schema:this,typeName:tp.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ek({...C(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:tp.ZodDefault})}brand(){return new eZ({typeName:tp.ZodBranded,type:this,...C(this._def)})}catch(e){return new eT({...C(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:tp.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eO.create(this,e)}readonly(){return ej.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let Z=/^c[^\s-]{8,}$/i,O=/^[0-9a-z]+$/,j=/^[0-9A-HJKMNP-TV-Z]{26}$/i,S=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,A=/^[a-z0-9_-]{21}$/i,P=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,R=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,N=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,I=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,$=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,U=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,L=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,M=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,D=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,F="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",z=RegExp(`^${F}$`);function V(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function q(e){let t=`${F}T${V(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}class H extends E{_parse(e){var r,n,i,o;let l;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==a.string){let t=this._getOrReturnCtx(e);return m(t,{code:s.invalid_type,expected:a.string,received:t.parsedType}),_}let d=new f;for(let a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(m(l=this._getOrReturnCtx(e,l),{code:s.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),d.dirty());else if("max"===a.kind)e.data.length>a.value&&(m(l=this._getOrReturnCtx(e,l),{code:s.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),d.dirty());else if("length"===a.kind){let t=e.data.length>a.value,r=e.data.length<a.value;(t||r)&&(l=this._getOrReturnCtx(e,l),t?m(l,{code:s.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):r&&m(l,{code:s.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),d.dirty())}else if("email"===a.kind)N.test(e.data)||(m(l=this._getOrReturnCtx(e,l),{validation:"email",code:s.invalid_string,message:a.message}),d.dirty());else if("emoji"===a.kind)t||(t=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),t.test(e.data)||(m(l=this._getOrReturnCtx(e,l),{validation:"emoji",code:s.invalid_string,message:a.message}),d.dirty());else if("uuid"===a.kind)S.test(e.data)||(m(l=this._getOrReturnCtx(e,l),{validation:"uuid",code:s.invalid_string,message:a.message}),d.dirty());else if("nanoid"===a.kind)A.test(e.data)||(m(l=this._getOrReturnCtx(e,l),{validation:"nanoid",code:s.invalid_string,message:a.message}),d.dirty());else if("cuid"===a.kind)Z.test(e.data)||(m(l=this._getOrReturnCtx(e,l),{validation:"cuid",code:s.invalid_string,message:a.message}),d.dirty());else if("cuid2"===a.kind)O.test(e.data)||(m(l=this._getOrReturnCtx(e,l),{validation:"cuid2",code:s.invalid_string,message:a.message}),d.dirty());else if("ulid"===a.kind)j.test(e.data)||(m(l=this._getOrReturnCtx(e,l),{validation:"ulid",code:s.invalid_string,message:a.message}),d.dirty());else if("url"===a.kind)try{new URL(e.data)}catch{m(l=this._getOrReturnCtx(e,l),{validation:"url",code:s.invalid_string,message:a.message}),d.dirty()}else"regex"===a.kind?(a.regex.lastIndex=0,a.regex.test(e.data)||(m(l=this._getOrReturnCtx(e,l),{validation:"regex",code:s.invalid_string,message:a.message}),d.dirty())):"trim"===a.kind?e.data=e.data.trim():"includes"===a.kind?e.data.includes(a.value,a.position)||(m(l=this._getOrReturnCtx(e,l),{code:s.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),d.dirty()):"toLowerCase"===a.kind?e.data=e.data.toLowerCase():"toUpperCase"===a.kind?e.data=e.data.toUpperCase():"startsWith"===a.kind?e.data.startsWith(a.value)||(m(l=this._getOrReturnCtx(e,l),{code:s.invalid_string,validation:{startsWith:a.value},message:a.message}),d.dirty()):"endsWith"===a.kind?e.data.endsWith(a.value)||(m(l=this._getOrReturnCtx(e,l),{code:s.invalid_string,validation:{endsWith:a.value},message:a.message}),d.dirty()):"datetime"===a.kind?q(a).test(e.data)||(m(l=this._getOrReturnCtx(e,l),{code:s.invalid_string,validation:"datetime",message:a.message}),d.dirty()):"date"===a.kind?z.test(e.data)||(m(l=this._getOrReturnCtx(e,l),{code:s.invalid_string,validation:"date",message:a.message}),d.dirty()):"time"===a.kind?RegExp(`^${V(a)}$`).test(e.data)||(m(l=this._getOrReturnCtx(e,l),{code:s.invalid_string,validation:"time",message:a.message}),d.dirty()):"duration"===a.kind?R.test(e.data)||(m(l=this._getOrReturnCtx(e,l),{validation:"duration",code:s.invalid_string,message:a.message}),d.dirty()):"ip"===a.kind?(r=e.data,!(("v4"===(n=a.version)||!n)&&I.test(r)||("v6"===n||!n)&&U.test(r))&&1&&(m(l=this._getOrReturnCtx(e,l),{validation:"ip",code:s.invalid_string,message:a.message}),d.dirty())):"jwt"===a.kind?!function(e,t){if(!P.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(a));if("object"!=typeof n||null===n||"typ"in n&&n?.typ!=="JWT"||!n.alg||t&&n.alg!==t)return!1;return!0}catch{return!1}}(e.data,a.alg)&&(m(l=this._getOrReturnCtx(e,l),{validation:"jwt",code:s.invalid_string,message:a.message}),d.dirty()):"cidr"===a.kind?(i=e.data,!(("v4"===(o=a.version)||!o)&&$.test(i)||("v6"===o||!o)&&L.test(i))&&1&&(m(l=this._getOrReturnCtx(e,l),{validation:"cidr",code:s.invalid_string,message:a.message}),d.dirty())):"base64"===a.kind?M.test(e.data)||(m(l=this._getOrReturnCtx(e,l),{validation:"base64",code:s.invalid_string,message:a.message}),d.dirty()):"base64url"===a.kind?D.test(e.data)||(m(l=this._getOrReturnCtx(e,l),{validation:"base64url",code:s.invalid_string,message:a.message}),d.dirty()):td.assertNever(a);return{status:d.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:s.invalid_string,...tc.errToObj(r)})}_addCheck(e){return new H({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...tc.errToObj(e)})}url(e){return this._addCheck({kind:"url",...tc.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...tc.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...tc.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...tc.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...tc.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...tc.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...tc.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...tc.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...tc.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...tc.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...tc.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...tc.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...tc.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...tc.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...tc.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...tc.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...tc.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...tc.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...tc.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...tc.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...tc.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...tc.errToObj(t)})}nonempty(e){return this.min(1,tc.errToObj(e))}trim(){return new H({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new H({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new H({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}H.create=e=>new H({checks:[],typeName:tp.ZodString,coerce:e?.coerce??!1,...C(e)});class B extends E{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==a.number){let t=this._getOrReturnCtx(e);return m(t,{code:s.invalid_type,expected:a.number,received:t.parsedType}),_}let r=new f;for(let a of this._def.checks)"int"===a.kind?td.isInteger(e.data)||(m(t=this._getOrReturnCtx(e,t),{code:s.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(m(t=this._getOrReturnCtx(e,t),{code:s.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(m(t=this._getOrReturnCtx(e,t),{code:s.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"multipleOf"===a.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,n=r>a?r:a;return Number.parseInt(e.toFixed(n).replace(".",""))%Number.parseInt(t.toFixed(n).replace(".",""))/10**n}(e.data,a.value)&&(m(t=this._getOrReturnCtx(e,t),{code:s.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(m(t=this._getOrReturnCtx(e,t),{code:s.not_finite,message:a.message}),r.dirty()):td.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,tc.toString(t))}gt(e,t){return this.setLimit("min",e,!1,tc.toString(t))}lte(e,t){return this.setLimit("max",e,!0,tc.toString(t))}lt(e,t){return this.setLimit("max",e,!1,tc.toString(t))}setLimit(e,t,r,a){return new B({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:tc.toString(a)}]})}_addCheck(e){return new B({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:tc.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:tc.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:tc.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:tc.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:tc.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:tc.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:tc.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:tc.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:tc.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&td.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}B.create=e=>new B({checks:[],typeName:tp.ZodNumber,coerce:e?.coerce||!1,...C(e)});class W extends E{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==a.bigint)return this._getInvalidInput(e);let r=new f;for(let a of this._def.checks)"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(m(t=this._getOrReturnCtx(e,t),{code:s.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(m(t=this._getOrReturnCtx(e,t),{code:s.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(m(t=this._getOrReturnCtx(e,t),{code:s.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):td.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return m(t,{code:s.invalid_type,expected:a.bigint,received:t.parsedType}),_}gte(e,t){return this.setLimit("min",e,!0,tc.toString(t))}gt(e,t){return this.setLimit("min",e,!1,tc.toString(t))}lte(e,t){return this.setLimit("max",e,!0,tc.toString(t))}lt(e,t){return this.setLimit("max",e,!1,tc.toString(t))}setLimit(e,t,r,a){return new W({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:tc.toString(a)}]})}_addCheck(e){return new W({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:tc.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:tc.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:tc.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:tc.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:tc.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}W.create=e=>new W({checks:[],typeName:tp.ZodBigInt,coerce:e?.coerce??!1,...C(e)});class K extends E{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==a.boolean){let t=this._getOrReturnCtx(e);return m(t,{code:s.invalid_type,expected:a.boolean,received:t.parsedType}),_}return y(e.data)}}K.create=e=>new K({typeName:tp.ZodBoolean,coerce:e?.coerce||!1,...C(e)});class J extends E{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==a.date){let t=this._getOrReturnCtx(e);return m(t,{code:s.invalid_type,expected:a.date,received:t.parsedType}),_}if(Number.isNaN(e.data.getTime()))return m(this._getOrReturnCtx(e),{code:s.invalid_date}),_;let r=new f;for(let a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(m(t=this._getOrReturnCtx(e,t),{code:s.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(m(t=this._getOrReturnCtx(e,t),{code:s.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):td.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new J({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:tc.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:tc.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}J.create=e=>new J({checks:[],coerce:e?.coerce||!1,typeName:tp.ZodDate,...C(e)});class Y extends E{_parse(e){if(this._getType(e)!==a.symbol){let t=this._getOrReturnCtx(e);return m(t,{code:s.invalid_type,expected:a.symbol,received:t.parsedType}),_}return y(e.data)}}Y.create=e=>new Y({typeName:tp.ZodSymbol,...C(e)});class G extends E{_parse(e){if(this._getType(e)!==a.undefined){let t=this._getOrReturnCtx(e);return m(t,{code:s.invalid_type,expected:a.undefined,received:t.parsedType}),_}return y(e.data)}}G.create=e=>new G({typeName:tp.ZodUndefined,...C(e)});class X extends E{_parse(e){if(this._getType(e)!==a.null){let t=this._getOrReturnCtx(e);return m(t,{code:s.invalid_type,expected:a.null,received:t.parsedType}),_}return y(e.data)}}X.create=e=>new X({typeName:tp.ZodNull,...C(e)});class Q extends E{constructor(){super(...arguments),this._any=!0}_parse(e){return y(e.data)}}Q.create=e=>new Q({typeName:tp.ZodAny,...C(e)});class ee extends E{constructor(){super(...arguments),this._unknown=!0}_parse(e){return y(e.data)}}ee.create=e=>new ee({typeName:tp.ZodUnknown,...C(e)});class et extends E{_parse(e){let t=this._getOrReturnCtx(e);return m(t,{code:s.invalid_type,expected:a.never,received:t.parsedType}),_}}et.create=e=>new et({typeName:tp.ZodNever,...C(e)});class er extends E{_parse(e){if(this._getType(e)!==a.undefined){let t=this._getOrReturnCtx(e);return m(t,{code:s.invalid_type,expected:a.void,received:t.parsedType}),_}return y(e.data)}}er.create=e=>new er({typeName:tp.ZodVoid,...C(e)});class ea extends E{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==a.array)return m(t,{code:s.invalid_type,expected:a.array,received:t.parsedType}),_;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,a=t.data.length<n.exactLength.value;(e||a)&&(m(t,{code:e?s.too_big:s.too_small,minimum:a?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(m(t,{code:s.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(m(t,{code:s.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new k(t,e,t.path,r)))).then(e=>f.mergeArray(r,e));let i=[...t.data].map((e,r)=>n.type._parseSync(new k(t,e,t.path,r)));return f.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new ea({...this._def,minLength:{value:e,message:tc.toString(t)}})}max(e,t){return new ea({...this._def,maxLength:{value:e,message:tc.toString(t)}})}length(e,t){return new ea({...this._def,exactLength:{value:e,message:tc.toString(t)}})}nonempty(e){return this.min(1,e)}}ea.create=(e,t)=>new ea({type:e,minLength:null,maxLength:null,exactLength:null,typeName:tp.ZodArray,...C(t)});class en extends E{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=td.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==a.object){let t=this._getOrReturnCtx(e);return m(t,{code:s.invalid_type,expected:a.object,received:t.parsedType}),_}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof et&&"strip"===this._def.unknownKeys))for(let e in r.data)i.includes(e)||o.push(e);let l=[];for(let e of i){let t=n[e],a=r.data[e];l.push({key:{status:"valid",value:e},value:t._parse(new k(r,a,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof et){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of o)l.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)o.length>0&&(m(r,{code:s.unrecognized_keys,keys:o}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of o){let a=r.data[t];l.push({key:{status:"valid",value:t},value:e._parse(new k(r,a,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of l){let r=await t.key,a=await t.value;e.push({key:r,value:a,alwaysSet:t.alwaysSet})}return e}).then(e=>f.mergeObjectSync(t,e)):f.mergeObjectSync(t,l)}get shape(){return this._def.shape()}strict(e){return tc.errToObj,new en({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let a=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:tc.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new en({...this._def,unknownKeys:"strip"})}passthrough(){return new en({...this._def,unknownKeys:"passthrough"})}extend(e){return new en({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new en({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:tp.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new en({...this._def,catchall:e})}pick(e){let t={};for(let r of td.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new en({...this._def,shape:()=>t})}omit(e){let t={};for(let r of td.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new en({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof en){let r={};for(let a in t.shape){let n=t.shape[a];r[a]=ew.create(e(n))}return new en({...t._def,shape:()=>r})}if(t instanceof ea)return new ea({...t._def,type:e(t.element)});if(t instanceof ew)return ew.create(e(t.unwrap()));if(t instanceof ex)return ex.create(e(t.unwrap()));if(t instanceof ed)return ed.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};for(let r of td.objectKeys(this.shape)){let a=this.shape[r];e&&!e[r]?t[r]=a:t[r]=a.optional()}return new en({...this._def,shape:()=>t})}required(e){let t={};for(let r of td.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof ew;)e=e._def.innerType;t[r]=e}return new en({...this._def,shape:()=>t})}keyof(){return e_(td.objectKeys(this.shape))}}en.create=(e,t)=>new en({shape:()=>e,unknownKeys:"strip",catchall:et.create(),typeName:tp.ZodObject,...C(t)}),en.strictCreate=(e,t)=>new en({shape:()=>e,unknownKeys:"strict",catchall:et.create(),typeName:tp.ZodObject,...C(t)}),en.lazycreate=(e,t)=>new en({shape:e,unknownKeys:"strip",catchall:et.create(),typeName:tp.ZodObject,...C(t)});class es extends E{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new o(e.ctx.common.issues));return m(t,{code:s.invalid_union,unionErrors:r}),_});{let e,a=[];for(let n of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&a.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let n=a.map(e=>new o(e));return m(t,{code:s.invalid_union,unionErrors:n}),_}}get options(){return this._def.options}}es.create=(e,t)=>new es({options:e,typeName:tp.ZodUnion,...C(t)});let ei=e=>{if(e instanceof em)return ei(e.schema);if(e instanceof eb)return ei(e.innerType());if(e instanceof ef)return[e.value];if(e instanceof eg)return e.options;if(e instanceof ey)return td.objectValues(e.enum);else if(e instanceof ek)return ei(e._def.innerType);else if(e instanceof G)return[void 0];else if(e instanceof X)return[null];else if(e instanceof ew)return[void 0,...ei(e.unwrap())];else if(e instanceof ex)return[null,...ei(e.unwrap())];else if(e instanceof eZ)return ei(e.unwrap());else if(e instanceof ej)return ei(e.unwrap());else if(e instanceof eT)return ei(e._def.innerType);else return[]};class eo extends E{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==a.object)return m(t,{code:s.invalid_type,expected:a.object,received:t.parsedType}),_;let r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(m(t,{code:s.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),_)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let a=new Map;for(let r of t){let t=ei(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let n of t){if(a.has(n))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);a.set(n,r)}}return new eo({typeName:tp.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...C(r)})}}class el extends E{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),i=(e,i)=>{if(v(e)||v(i))return _;let o=function e(t,r){let s=n(t),i=n(r);if(t===r)return{valid:!0,data:t};if(s===a.object&&i===a.object){let a=td.objectKeys(r),n=td.objectKeys(t).filter(e=>-1!==a.indexOf(e)),s={...t,...r};for(let a of n){let n=e(t[a],r[a]);if(!n.valid)return{valid:!1};s[a]=n.data}return{valid:!0,data:s}}if(s===a.array&&i===a.array){if(t.length!==r.length)return{valid:!1};let a=[];for(let n=0;n<t.length;n++){let s=e(t[n],r[n]);if(!s.valid)return{valid:!1};a.push(s.data)}return{valid:!0,data:a}}if(s===a.date&&i===a.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,i.value);return o.valid?((b(e)||b(i))&&t.dirty(),{status:t.value,value:o.data}):(m(r,{code:s.invalid_intersection_types}),_)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>i(e,t)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}el.create=(e,t,r)=>new el({left:e,right:t,typeName:tp.ZodIntersection,...C(r)});class ed extends E{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==a.array)return m(r,{code:s.invalid_type,expected:a.array,received:r.parsedType}),_;if(r.data.length<this._def.items.length)return m(r,{code:s.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_;!this._def.rest&&r.data.length>this._def.items.length&&(m(r,{code:s.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let a=this._def.items[t]||this._def.rest;return a?a._parse(new k(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>f.mergeArray(t,e)):f.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new ed({...this._def,rest:e})}}ed.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new ed({items:e,typeName:tp.ZodTuple,rest:null,...C(t)})};class eu extends E{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==a.object)return m(r,{code:s.invalid_type,expected:a.object,received:r.parsedType}),_;let n=[],i=this._def.keyType,o=this._def.valueType;for(let e in r.data)n.push({key:i._parse(new k(r,e,r.path,e)),value:o._parse(new k(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?f.mergeObjectAsync(t,n):f.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new eu(t instanceof E?{keyType:e,valueType:t,typeName:tp.ZodRecord,...C(r)}:{keyType:H.create(),valueType:e,typeName:tp.ZodRecord,...C(t)})}}class ec extends E{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==a.map)return m(r,{code:s.invalid_type,expected:a.map,received:r.parsedType}),_;let n=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([e,t],a)=>({key:n._parse(new k(r,e,r.path,[a,"key"])),value:i._parse(new k(r,t,r.path,[a,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of o){let a=await r.key,n=await r.value;if("aborted"===a.status||"aborted"===n.status)return _;("dirty"===a.status||"dirty"===n.status)&&t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of o){let a=r.key,n=r.value;if("aborted"===a.status||"aborted"===n.status)return _;("dirty"===a.status||"dirty"===n.status)&&t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}}}}ec.create=(e,t,r)=>new ec({valueType:t,keyType:e,typeName:tp.ZodMap,...C(r)});class ep extends E{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==a.set)return m(r,{code:s.invalid_type,expected:a.set,received:r.parsedType}),_;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(m(r,{code:s.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(m(r,{code:s.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let i=this._def.valueType;function o(e){let r=new Set;for(let a of e){if("aborted"===a.status)return _;"dirty"===a.status&&t.dirty(),r.add(a.value)}return{status:t.value,value:r}}let l=[...r.data.values()].map((e,t)=>i._parse(new k(r,e,r.path,t)));return r.common.async?Promise.all(l).then(e=>o(e)):o(l)}min(e,t){return new ep({...this._def,minSize:{value:e,message:tc.toString(t)}})}max(e,t){return new ep({...this._def,maxSize:{value:e,message:tc.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ep.create=(e,t)=>new ep({valueType:e,minSize:null,maxSize:null,typeName:tp.ZodSet,...C(t)});class eh extends E{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==a.function)return m(t,{code:s.invalid_type,expected:a.function,received:t.parsedType}),_;function r(e,r){return p({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,d,l].filter(e=>!!e),issueData:{code:s.invalid_arguments,argumentsError:r}})}function n(e,r){return p({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,d,l].filter(e=>!!e),issueData:{code:s.invalid_return_type,returnTypeError:r}})}let i={errorMap:t.common.contextualErrorMap},u=t.data;if(this._def.returns instanceof ev){let e=this;return y(async function(...t){let a=new o([]),s=await e._def.args.parseAsync(t,i).catch(e=>{throw a.addIssue(r(t,e)),a}),l=await Reflect.apply(u,this,s);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw a.addIssue(n(l,e)),a})})}{let e=this;return y(function(...t){let a=e._def.args.safeParse(t,i);if(!a.success)throw new o([r(t,a.error)]);let s=Reflect.apply(u,this,a.data),l=e._def.returns.safeParse(s,i);if(!l.success)throw new o([n(s,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new eh({...this._def,args:ed.create(e).rest(ee.create())})}returns(e){return new eh({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new eh({args:e||ed.create([]).rest(ee.create()),returns:t||ee.create(),typeName:tp.ZodFunction,...C(r)})}}class em extends E{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}em.create=(e,t)=>new em({getter:e,typeName:tp.ZodLazy,...C(t)});class ef extends E{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return m(t,{received:t.data,code:s.invalid_literal,expected:this._def.value}),_}return{status:"valid",value:e.data}}get value(){return this._def.value}}function e_(e,t){return new eg({values:e,typeName:tp.ZodEnum,...C(t)})}ef.create=(e,t)=>new ef({value:e,typeName:tp.ZodLiteral,...C(t)});class eg extends E{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return m(t,{expected:td.joinValues(r),received:t.parsedType,code:s.invalid_type}),_}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return m(t,{received:t.data,code:s.invalid_enum_value,options:r}),_}return y(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return eg.create(e,{...this._def,...t})}exclude(e,t=this._def){return eg.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}eg.create=e_;class ey extends E{_parse(e){let t=td.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==a.string&&r.parsedType!==a.number){let e=td.objectValues(t);return m(r,{expected:td.joinValues(e),received:r.parsedType,code:s.invalid_type}),_}if(this._cache||(this._cache=new Set(td.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=td.objectValues(t);return m(r,{received:r.data,code:s.invalid_enum_value,options:e}),_}return y(e.data)}get enum(){return this._def.values}}ey.create=(e,t)=>new ey({values:e,typeName:tp.ZodNativeEnum,...C(t)});class ev extends E{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==a.promise&&!1===t.common.async?(m(t,{code:s.invalid_type,expected:a.promise,received:t.parsedType}),_):y((t.parsedType===a.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ev.create=(e,t)=>new ev({type:e,typeName:tp.ZodPromise,...C(t)});class eb extends E{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===tp.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,n={addIssue:e=>{m(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===a.type){let e=a.transform(r.data,n);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return _;let a=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===a.status?_:"dirty"===a.status||"dirty"===t.value?g(a.value):a});{if("aborted"===t.value)return _;let a=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===a.status?_:"dirty"===a.status||"dirty"===t.value?g(a.value):a}}if("refinement"===a.type){let e=e=>{let t=a.refinement(e,n);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?_:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===a.status?_:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}}if("transform"===a.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>w(e)?Promise.resolve(a.transform(e.value,n)).then(e=>({status:t.value,value:e})):_);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!w(e))return _;let s=a.transform(e.value,n);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}td.assertNever(a)}}eb.create=(e,t,r)=>new eb({schema:e,typeName:tp.ZodEffects,effect:t,...C(r)}),eb.createWithPreprocess=(e,t,r)=>new eb({schema:t,effect:{type:"preprocess",transform:e},typeName:tp.ZodEffects,...C(r)});class ew extends E{_parse(e){return this._getType(e)===a.undefined?y(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ew.create=(e,t)=>new ew({innerType:e,typeName:tp.ZodOptional,...C(t)});class ex extends E{_parse(e){return this._getType(e)===a.null?y(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ex.create=(e,t)=>new ex({innerType:e,typeName:tp.ZodNullable,...C(t)});class ek extends E{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===a.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ek.create=(e,t)=>new ek({innerType:e,typeName:tp.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...C(t)});class eT extends E{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return x(a)?a.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new o(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new o(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eT.create=(e,t)=>new eT({innerType:e,typeName:tp.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...C(t)});class eC extends E{_parse(e){if(this._getType(e)!==a.nan){let t=this._getOrReturnCtx(e);return m(t,{code:s.invalid_type,expected:a.nan,received:t.parsedType}),_}return{status:"valid",value:e.data}}}eC.create=e=>new eC({typeName:tp.ZodNaN,...C(e)});let eE=Symbol("zod_brand");class eZ extends E{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class eO extends E{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?_:"dirty"===e.status?(t.dirty(),g(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?_:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eO({in:e,out:t,typeName:tp.ZodPipeline})}}class ej extends E{_parse(e){let t=this._def.innerType._parse(e),r=e=>(w(e)&&(e.value=Object.freeze(e.value)),e);return x(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function eS(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function eA(e,t={},r){return e?Q.create().superRefine((a,n)=>{let s=e(a);if(s instanceof Promise)return s.then(e=>{if(!e){let e=eS(t,a),s=e.fatal??r??!0;n.addIssue({code:"custom",...e,fatal:s})}});if(!s){let e=eS(t,a),s=e.fatal??r??!0;n.addIssue({code:"custom",...e,fatal:s})}}):Q.create()}ej.create=(e,t)=>new ej({innerType:e,typeName:tp.ZodReadonly,...C(t)});let eP={object:en.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(tp||(tp={}));let eR=(e,t={message:`Input not instance of ${e.name}`})=>eA(t=>t instanceof e,t),eN=H.create,eI=B.create,e$=eC.create,eU=W.create,eL=K.create,eM=J.create,eD=Y.create,eF=G.create,ez=X.create,eV=Q.create,eq=ee.create,eH=et.create,eB=er.create,eW=ea.create,eK=en.create,eJ=en.strictCreate,eY=es.create,eG=eo.create,eX=el.create,eQ=ed.create,e0=eu.create,e1=ec.create,e9=ep.create,e4=eh.create,e2=em.create,e3=ef.create,e5=eg.create,e6=ey.create,e7=ev.create,e8=eb.create,te=ew.create,tt=ex.create,tr=eb.createWithPreprocess,ta=eO.create,tn=()=>eN().optional(),ts=()=>eI().optional(),ti=()=>eL().optional(),to={string:e=>H.create({...e,coerce:!0}),number:e=>B.create({...e,coerce:!0}),boolean:e=>K.create({...e,coerce:!0}),bigint:e=>W.create({...e,coerce:!0}),date:e=>J.create({...e,coerce:!0})},tl=_;e.i(35997),e.i(98700);var td,tu,tc,tp,th,tm=e.i(39940),tm=tm;let tf="2025-06-18",t_="2025-03-26",tg=[tf,"2025-03-26","2024-11-05","2024-10-07"],ty=tm.union([tm.string(),tm.number().int()]),tv=tm.string(),tb=tm.object({progressToken:tm.optional(ty)}).passthrough(),tw=tm.object({_meta:tm.optional(tb)}).passthrough(),tx=tm.object({method:tm.string(),params:tm.optional(tw)}),tk=tm.object({_meta:tm.optional(tm.object({}).passthrough())}).passthrough(),tT=tm.object({method:tm.string(),params:tm.optional(tk)}),tC=tm.object({_meta:tm.optional(tm.object({}).passthrough())}).passthrough(),tE=tm.union([tm.string(),tm.number().int()]),tZ=tm.object({jsonrpc:tm.literal("2.0"),id:tE}).merge(tx).strict(),tO=e=>tZ.safeParse(e).success,tj=tm.object({jsonrpc:tm.literal("2.0")}).merge(tT).strict(),tS=tm.object({jsonrpc:tm.literal("2.0"),id:tE,result:tC}).strict(),tA=e=>tS.safeParse(e).success;!function(e){e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError"}(th||(th={}));let tP=tm.object({jsonrpc:tm.literal("2.0"),id:tE,error:tm.object({code:tm.number().int(),message:tm.string(),data:tm.optional(tm.unknown())})}).strict(),tR=e=>tP.safeParse(e).success,tN=tm.union([tZ,tj,tS,tP]),tI=tC.strict(),t$=tT.extend({method:tm.literal("notifications/cancelled"),params:tk.extend({requestId:tE,reason:tm.string().optional()})}),tU=tm.object({name:tm.string(),title:tm.optional(tm.string())}).passthrough(),tL=tU.extend({version:tm.string()}),tM=tm.object({experimental:tm.optional(tm.object({}).passthrough()),sampling:tm.optional(tm.object({}).passthrough()),elicitation:tm.optional(tm.object({}).passthrough()),roots:tm.optional(tm.object({listChanged:tm.optional(tm.boolean())}).passthrough())}).passthrough(),tD=tx.extend({method:tm.literal("initialize"),params:tw.extend({protocolVersion:tm.string(),capabilities:tM,clientInfo:tL})}),tF=e=>tD.safeParse(e).success,tz=tm.object({experimental:tm.optional(tm.object({}).passthrough()),logging:tm.optional(tm.object({}).passthrough()),completions:tm.optional(tm.object({}).passthrough()),prompts:tm.optional(tm.object({listChanged:tm.optional(tm.boolean())}).passthrough()),resources:tm.optional(tm.object({subscribe:tm.optional(tm.boolean()),listChanged:tm.optional(tm.boolean())}).passthrough()),tools:tm.optional(tm.object({listChanged:tm.optional(tm.boolean())}).passthrough())}).passthrough(),tV=tC.extend({protocolVersion:tm.string(),capabilities:tz,serverInfo:tL,instructions:tm.optional(tm.string())}),tq=tT.extend({method:tm.literal("notifications/initialized")}),tH=e=>tq.safeParse(e).success,tB=tx.extend({method:tm.literal("ping")}),tW=tm.object({progress:tm.number(),total:tm.optional(tm.number()),message:tm.optional(tm.string())}).passthrough(),tK=tT.extend({method:tm.literal("notifications/progress"),params:tk.merge(tW).extend({progressToken:ty})}),tJ=tx.extend({params:tw.extend({cursor:tm.optional(tv)}).optional()}),tY=tC.extend({nextCursor:tm.optional(tv)}),tG=tm.object({uri:tm.string(),mimeType:tm.optional(tm.string()),_meta:tm.optional(tm.object({}).passthrough())}).passthrough(),tX=tG.extend({text:tm.string()}),tQ=tm.string().refine(e=>{try{return atob(e),!0}catch(e){return!1}},{message:"Invalid Base64 string"}),t0=tG.extend({blob:tQ}),t1=tU.extend({uri:tm.string(),description:tm.optional(tm.string()),mimeType:tm.optional(tm.string()),_meta:tm.optional(tm.object({}).passthrough())}),t9=tU.extend({uriTemplate:tm.string(),description:tm.optional(tm.string()),mimeType:tm.optional(tm.string()),_meta:tm.optional(tm.object({}).passthrough())}),t4=tJ.extend({method:tm.literal("resources/list")}),t2=tY.extend({resources:tm.array(t1)}),t3=tJ.extend({method:tm.literal("resources/templates/list")}),t5=tY.extend({resourceTemplates:tm.array(t9)}),t6=tx.extend({method:tm.literal("resources/read"),params:tw.extend({uri:tm.string()})}),t7=tC.extend({contents:tm.array(tm.union([tX,t0]))}),t8=tT.extend({method:tm.literal("notifications/resources/list_changed")}),re=tx.extend({method:tm.literal("resources/subscribe"),params:tw.extend({uri:tm.string()})}),rt=tx.extend({method:tm.literal("resources/unsubscribe"),params:tw.extend({uri:tm.string()})}),rr=tT.extend({method:tm.literal("notifications/resources/updated"),params:tk.extend({uri:tm.string()})}),ra=tm.object({name:tm.string(),description:tm.optional(tm.string()),required:tm.optional(tm.boolean())}).passthrough(),rn=tU.extend({description:tm.optional(tm.string()),arguments:tm.optional(tm.array(ra)),_meta:tm.optional(tm.object({}).passthrough())}),rs=tJ.extend({method:tm.literal("prompts/list")}),ri=tY.extend({prompts:tm.array(rn)}),ro=tx.extend({method:tm.literal("prompts/get"),params:tw.extend({name:tm.string(),arguments:tm.optional(tm.record(tm.string()))})}),rl=tm.object({type:tm.literal("text"),text:tm.string(),_meta:tm.optional(tm.object({}).passthrough())}).passthrough(),rd=tm.object({type:tm.literal("image"),data:tQ,mimeType:tm.string(),_meta:tm.optional(tm.object({}).passthrough())}).passthrough(),ru=tm.object({type:tm.literal("audio"),data:tQ,mimeType:tm.string(),_meta:tm.optional(tm.object({}).passthrough())}).passthrough(),rc=tm.object({type:tm.literal("resource"),resource:tm.union([tX,t0]),_meta:tm.optional(tm.object({}).passthrough())}).passthrough(),rp=t1.extend({type:tm.literal("resource_link")}),rh=tm.union([rl,rd,ru,rp,rc]),rm=tm.object({role:tm.enum(["user","assistant"]),content:rh}).passthrough(),rf=tC.extend({description:tm.optional(tm.string()),messages:tm.array(rm)}),r_=tT.extend({method:tm.literal("notifications/prompts/list_changed")}),rg=tm.object({title:tm.optional(tm.string()),readOnlyHint:tm.optional(tm.boolean()),destructiveHint:tm.optional(tm.boolean()),idempotentHint:tm.optional(tm.boolean()),openWorldHint:tm.optional(tm.boolean())}).passthrough(),ry=tU.extend({description:tm.optional(tm.string()),inputSchema:tm.object({type:tm.literal("object"),properties:tm.optional(tm.object({}).passthrough()),required:tm.optional(tm.array(tm.string()))}).passthrough(),outputSchema:tm.optional(tm.object({type:tm.literal("object"),properties:tm.optional(tm.object({}).passthrough()),required:tm.optional(tm.array(tm.string()))}).passthrough()),annotations:tm.optional(rg),_meta:tm.optional(tm.object({}).passthrough())}),rv=tJ.extend({method:tm.literal("tools/list")}),rb=tY.extend({tools:tm.array(ry)}),rw=tC.extend({content:tm.array(rh).default([]),structuredContent:tm.object({}).passthrough().optional(),isError:tm.optional(tm.boolean())});rw.or(tC.extend({toolResult:tm.unknown()}));let rx=tx.extend({method:tm.literal("tools/call"),params:tw.extend({name:tm.string(),arguments:tm.optional(tm.record(tm.unknown()))})}),rk=tT.extend({method:tm.literal("notifications/tools/list_changed")}),rT=tm.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),rC=tx.extend({method:tm.literal("logging/setLevel"),params:tw.extend({level:rT})}),rE=tT.extend({method:tm.literal("notifications/message"),params:tk.extend({level:rT,logger:tm.optional(tm.string()),data:tm.unknown()})}),rZ=tm.object({name:tm.string().optional()}).passthrough(),rO=tm.object({hints:tm.optional(tm.array(rZ)),costPriority:tm.optional(tm.number().min(0).max(1)),speedPriority:tm.optional(tm.number().min(0).max(1)),intelligencePriority:tm.optional(tm.number().min(0).max(1))}).passthrough(),rj=tm.object({role:tm.enum(["user","assistant"]),content:tm.union([rl,rd,ru])}).passthrough(),rS=tx.extend({method:tm.literal("sampling/createMessage"),params:tw.extend({messages:tm.array(rj),systemPrompt:tm.optional(tm.string()),includeContext:tm.optional(tm.enum(["none","thisServer","allServers"])),temperature:tm.optional(tm.number()),maxTokens:tm.number().int(),stopSequences:tm.optional(tm.array(tm.string())),metadata:tm.optional(tm.object({}).passthrough()),modelPreferences:tm.optional(rO)})}),rA=tC.extend({model:tm.string(),stopReason:tm.optional(tm.enum(["endTurn","stopSequence","maxTokens"]).or(tm.string())),role:tm.enum(["user","assistant"]),content:tm.discriminatedUnion("type",[rl,rd,ru])}),rP=tm.object({type:tm.literal("boolean"),title:tm.optional(tm.string()),description:tm.optional(tm.string()),default:tm.optional(tm.boolean())}).passthrough(),rR=tm.object({type:tm.literal("string"),title:tm.optional(tm.string()),description:tm.optional(tm.string()),minLength:tm.optional(tm.number()),maxLength:tm.optional(tm.number()),format:tm.optional(tm.enum(["email","uri","date","date-time"]))}).passthrough(),rN=tm.object({type:tm.enum(["number","integer"]),title:tm.optional(tm.string()),description:tm.optional(tm.string()),minimum:tm.optional(tm.number()),maximum:tm.optional(tm.number())}).passthrough(),rI=tm.object({type:tm.literal("string"),title:tm.optional(tm.string()),description:tm.optional(tm.string()),enum:tm.array(tm.string()),enumNames:tm.optional(tm.array(tm.string()))}).passthrough(),r$=tm.union([rP,rR,rN,rI]),rU=tx.extend({method:tm.literal("elicitation/create"),params:tw.extend({message:tm.string(),requestedSchema:tm.object({type:tm.literal("object"),properties:tm.record(tm.string(),r$),required:tm.optional(tm.array(tm.string()))}).passthrough()})}),rL=tC.extend({action:tm.enum(["accept","decline","cancel"]),content:tm.optional(tm.record(tm.string(),tm.unknown()))}),rM=tm.object({type:tm.literal("ref/resource"),uri:tm.string()}).passthrough(),rD=tm.object({type:tm.literal("ref/prompt"),name:tm.string()}).passthrough(),rF=tx.extend({method:tm.literal("completion/complete"),params:tw.extend({ref:tm.union([rD,rM]),argument:tm.object({name:tm.string(),value:tm.string()}).passthrough(),context:tm.optional(tm.object({arguments:tm.optional(tm.record(tm.string(),tm.string()))}))})}),rz=tC.extend({completion:tm.object({values:tm.array(tm.string()).max(100),total:tm.optional(tm.number().int()),hasMore:tm.optional(tm.boolean())}).passthrough()}),rV=tm.object({uri:tm.string().startsWith("file://"),name:tm.optional(tm.string()),_meta:tm.optional(tm.object({}).passthrough())}).passthrough(),rq=tx.extend({method:tm.literal("roots/list")}),rH=tC.extend({roots:tm.array(rV)}),rB=tT.extend({method:tm.literal("notifications/roots/list_changed")});async function rW(e){return(await r).getRandomValues(new Uint8Array(e))}async function rK(e){let t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r="",a=await rW(e);for(let n=0;n<e;n++){let e=a[n]%t.length;r+=t[e]}return r}async function rJ(e){return await rK(e)}async function rY(e){return btoa(String.fromCharCode(...new Uint8Array(await (await r).subtle.digest("SHA-256",new TextEncoder().encode(e))))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}async function rG(e){if(e||(e=43),e<43||e>128)throw`Expected a length between 43 and 128. Received ${e}.`;let t=await rJ(e),r=await rY(t);return{code_verifier:t,code_challenge:r}}tm.union([tB,tD,rF,rC,ro,rs,t4,t3,t6,re,rt,rx,rv]),tm.union([t$,tK,tq,rB]),tm.union([tI,rA,rL,rH]),tm.union([tB,rS,rU,rq]),tm.union([t$,tK,rE,rr,t8,rk,r_]),tm.union([tI,tV,rz,rf,ri,t2,t5,t7,rw,rb]),r=globalThis.crypto?.webcrypto??globalThis.crypto??e.A(70729).then(e=>e.webcrypto);var tm=tm;let rX=tm.string().url().superRefine((e,t)=>{if(!URL.canParse(e))return t.addIssue({code:tm.ZodIssueCode.custom,message:"URL must be parseable",fatal:!0}),tm.NEVER}).refine(e=>{let t=new URL(e);return"javascript:"!==t.protocol&&"data:"!==t.protocol&&"vbscript:"!==t.protocol},{message:"URL cannot use javascript:, data:, or vbscript: scheme"}),rQ=tm.object({resource:tm.string().url(),authorization_servers:tm.array(rX).optional(),jwks_uri:tm.string().url().optional(),scopes_supported:tm.array(tm.string()).optional(),bearer_methods_supported:tm.array(tm.string()).optional(),resource_signing_alg_values_supported:tm.array(tm.string()).optional(),resource_name:tm.string().optional(),resource_documentation:tm.string().optional(),resource_policy_uri:tm.string().url().optional(),resource_tos_uri:tm.string().url().optional(),tls_client_certificate_bound_access_tokens:tm.boolean().optional(),authorization_details_types_supported:tm.array(tm.string()).optional(),dpop_signing_alg_values_supported:tm.array(tm.string()).optional(),dpop_bound_access_tokens_required:tm.boolean().optional()}).passthrough(),r0=tm.object({issuer:tm.string(),authorization_endpoint:rX,token_endpoint:rX,registration_endpoint:rX.optional(),scopes_supported:tm.array(tm.string()).optional(),response_types_supported:tm.array(tm.string()),response_modes_supported:tm.array(tm.string()).optional(),grant_types_supported:tm.array(tm.string()).optional(),token_endpoint_auth_methods_supported:tm.array(tm.string()).optional(),token_endpoint_auth_signing_alg_values_supported:tm.array(tm.string()).optional(),service_documentation:rX.optional(),revocation_endpoint:rX.optional(),revocation_endpoint_auth_methods_supported:tm.array(tm.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:tm.array(tm.string()).optional(),introspection_endpoint:tm.string().optional(),introspection_endpoint_auth_methods_supported:tm.array(tm.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:tm.array(tm.string()).optional(),code_challenge_methods_supported:tm.array(tm.string()).optional()}).passthrough(),r1=tm.object({issuer:tm.string(),authorization_endpoint:rX,token_endpoint:rX,userinfo_endpoint:rX.optional(),jwks_uri:rX,registration_endpoint:rX.optional(),scopes_supported:tm.array(tm.string()).optional(),response_types_supported:tm.array(tm.string()),response_modes_supported:tm.array(tm.string()).optional(),grant_types_supported:tm.array(tm.string()).optional(),acr_values_supported:tm.array(tm.string()).optional(),subject_types_supported:tm.array(tm.string()),id_token_signing_alg_values_supported:tm.array(tm.string()),id_token_encryption_alg_values_supported:tm.array(tm.string()).optional(),id_token_encryption_enc_values_supported:tm.array(tm.string()).optional(),userinfo_signing_alg_values_supported:tm.array(tm.string()).optional(),userinfo_encryption_alg_values_supported:tm.array(tm.string()).optional(),userinfo_encryption_enc_values_supported:tm.array(tm.string()).optional(),request_object_signing_alg_values_supported:tm.array(tm.string()).optional(),request_object_encryption_alg_values_supported:tm.array(tm.string()).optional(),request_object_encryption_enc_values_supported:tm.array(tm.string()).optional(),token_endpoint_auth_methods_supported:tm.array(tm.string()).optional(),token_endpoint_auth_signing_alg_values_supported:tm.array(tm.string()).optional(),display_values_supported:tm.array(tm.string()).optional(),claim_types_supported:tm.array(tm.string()).optional(),claims_supported:tm.array(tm.string()).optional(),service_documentation:tm.string().optional(),claims_locales_supported:tm.array(tm.string()).optional(),ui_locales_supported:tm.array(tm.string()).optional(),claims_parameter_supported:tm.boolean().optional(),request_parameter_supported:tm.boolean().optional(),request_uri_parameter_supported:tm.boolean().optional(),require_request_uri_registration:tm.boolean().optional(),op_policy_uri:rX.optional(),op_tos_uri:rX.optional()}).passthrough().merge(r0.pick({code_challenge_methods_supported:!0})),r9=tm.object({access_token:tm.string(),id_token:tm.string().optional(),token_type:tm.string(),expires_in:tm.number().optional(),scope:tm.string().optional(),refresh_token:tm.string().optional()}).strip(),r4=tm.object({error:tm.string(),error_description:tm.string().optional(),error_uri:tm.string().optional()}),r2=tm.object({redirect_uris:tm.array(rX),token_endpoint_auth_method:tm.string().optional(),grant_types:tm.array(tm.string()).optional(),response_types:tm.array(tm.string()).optional(),client_name:tm.string().optional(),client_uri:rX.optional(),logo_uri:rX.optional(),scope:tm.string().optional(),contacts:tm.array(tm.string()).optional(),tos_uri:rX.optional(),policy_uri:tm.string().optional(),jwks_uri:rX.optional(),jwks:tm.any().optional(),software_id:tm.string().optional(),software_version:tm.string().optional(),software_statement:tm.string().optional()}).strip(),r3=tm.object({client_id:tm.string(),client_secret:tm.string().optional(),client_id_issued_at:tm.number().optional(),client_secret_expires_at:tm.number().optional()}).strip(),r5=r2.merge(r3);tm.object({error:tm.string(),error_description:tm.string().optional()}).strip(),tm.object({token:tm.string(),token_type_hint:tm.string().optional()}).strip();class r6 extends Error{constructor(e,t){super(e),this.errorUri=t,this.name=this.constructor.name}toResponseObject(){let e={error:this.errorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}get errorCode(){return this.constructor.errorCode}}class r7 extends r6{}r7.errorCode="invalid_request";class r8 extends r6{}r8.errorCode="invalid_client";class ae extends r6{}ae.errorCode="invalid_grant";class at extends r6{}at.errorCode="unauthorized_client";class ar extends r6{}ar.errorCode="unsupported_grant_type";class aa extends r6{}aa.errorCode="invalid_scope";class an extends r6{}an.errorCode="access_denied";class as extends r6{}as.errorCode="server_error";class ai extends r6{}ai.errorCode="temporarily_unavailable";class ao extends r6{}ao.errorCode="unsupported_response_type";class al extends r6{}al.errorCode="unsupported_token_type";class ad extends r6{}ad.errorCode="invalid_token";class au extends r6{}au.errorCode="method_not_allowed";class ac extends r6{}ac.errorCode="too_many_requests";class ap extends r6{}ap.errorCode="invalid_client_metadata";class ah extends r6{}ah.errorCode="insufficient_scope";let am={[r7.errorCode]:r7,[r8.errorCode]:r8,[ae.errorCode]:ae,[at.errorCode]:at,[ar.errorCode]:ar,[aa.errorCode]:aa,[an.errorCode]:an,[as.errorCode]:as,[ai.errorCode]:ai,[ao.errorCode]:ao,[al.errorCode]:al,[ad.errorCode]:ad,[au.errorCode]:au,[ac.errorCode]:ac,[ap.errorCode]:ap,[ah.errorCode]:ah};class af extends Error{constructor(e){super(null!=e?e:"Unauthorized")}}function a_(e,t){let r=void 0!==e.client_secret;return 0===t.length?r?"client_secret_post":"none":r&&t.includes("client_secret_basic")?"client_secret_basic":r&&t.includes("client_secret_post")?"client_secret_post":t.includes("none")?"none":r?"client_secret_post":"none"}function ag(e,t,r,a){let{client_id:n,client_secret:s}=t;switch(e){case"client_secret_basic":var i,o,l,d,u=n,c=s,p=r;if(!c)throw Error("client_secret_basic authentication requires a client_secret");let h=btoa(`${u}:${c}`);p.set("Authorization",`Basic ${h}`);return;case"client_secret_post":i=n,o=s,(l=a).set("client_id",i),o&&l.set("client_secret",o);return;case"none":d=n,a.set("client_id",d);return;default:throw Error(`Unsupported client authentication method: ${e}`)}}async function ay(e){let t=e instanceof Response?e.status:void 0,r=e instanceof Response?await e.text():e;try{let{error:e,error_description:t,error_uri:a}=r4.parse(JSON.parse(r));return new(am[e]||as)(t||"",a)}catch(e){return new as(`${t?`HTTP ${t}: `:""}Invalid OAuth error response: ${e}. Raw body: ${r}`)}}async function av(e,t){var r,a;try{return await ab(e,t)}catch(n){if(n instanceof r8||n instanceof at)return await (null==(r=e.invalidateCredentials)?void 0:r.call(e,"all")),await ab(e,t);if(n instanceof ae)return await (null==(a=e.invalidateCredentials)?void 0:a.call(e,"tokens")),await ab(e,t);throw n}}async function ab(e,{serverUrl:t,authorizationCode:r,scope:a,resourceMetadataUrl:n,fetchFn:s}){let i,o;try{(i=await ax(t,{resourceMetadataUrl:n},s)).authorization_servers&&i.authorization_servers.length>0&&(o=i.authorization_servers[0])}catch(e){}o||(o=t);let l=await aw(t,e,i),d=await aE(o,{fetchFn:s}),u=await Promise.resolve(e.clientInformation());if(!u){if(void 0!==r)throw Error("Existing OAuth client information is required when exchanging an authorization code");if(!e.saveClientInformation)throw Error("OAuth client information must be saveable for dynamic registration");let t=await aS(o,{metadata:d,clientMetadata:e.clientMetadata,fetchFn:s});await e.saveClientInformation(t),u=t}if(void 0!==r){let t=await e.codeVerifier(),a=await aO(o,{metadata:d,clientInformation:u,authorizationCode:r,codeVerifier:t,redirectUri:e.redirectUrl,resource:l,addClientAuthentication:e.addClientAuthentication,fetchFn:s});return await e.saveTokens(a),"AUTHORIZED"}let c=await e.tokens();if(null==c?void 0:c.refresh_token)try{let t=await aj(o,{metadata:d,clientInformation:u,refreshToken:c.refresh_token,resource:l,addClientAuthentication:e.addClientAuthentication,fetchFn:s});return await e.saveTokens(t),"AUTHORIZED"}catch(e){if(!(e instanceof r6)||e instanceof as);else throw e}let p=e.state?await e.state():void 0,{authorizationUrl:h,codeVerifier:m}=await aZ(o,{metadata:d,clientInformation:u,state:p,redirectUrl:e.redirectUrl,scope:a||e.clientMetadata.scope,resource:l});return await e.saveCodeVerifier(m),await e.redirectToAuthorization(h),"REDIRECT"}async function aw(e,t,r){let a=function(e){let t=new URL("string"==typeof e?e:e.href);return t.hash="",t}(e);if(t.validateResourceURL)return await t.validateResourceURL(a,null==r?void 0:r.resource);if(r){if(!function({requestedResource:e,configuredResource:t}){let r=new URL("string"==typeof e?e:e.href),a=new URL("string"==typeof t?t:t.href);if(r.origin!==a.origin||r.pathname.length<a.pathname.length)return!1;let n=r.pathname.endsWith("/")?r.pathname:r.pathname+"/",s=a.pathname.endsWith("/")?a.pathname:a.pathname+"/";return n.startsWith(s)}({requestedResource:a,configuredResource:r.resource}))throw Error(`Protected resource ${r.resource} does not match expected ${a} (or origin)`);return new URL(r.resource)}}async function ax(e,t,r=fetch){let a=await aC(e,"oauth-protected-resource",r,{protocolVersion:null==t?void 0:t.protocolVersion,metadataUrl:null==t?void 0:t.resourceMetadataUrl});if(!a||404===a.status)throw Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!a.ok)throw Error(`HTTP ${a.status} trying to load well-known OAuth protected resource metadata.`);return rQ.parse(await a.json())}async function ak(e,t,r=fetch){try{return await r(e,{headers:t})}catch(a){if(a instanceof TypeError)if(t)return ak(e,void 0,r);else return;throw a}}async function aT(e,t,r=fetch){return await ak(e,{"MCP-Protocol-Version":t},r)}async function aC(e,t,r,a){var n,s,i,o;let l,d=new URL(e),u=null!=(n=null==a?void 0:a.protocolVersion)?n:tf;(null==a?void 0:a.metadataUrl)?l=new URL(a.metadataUrl):(l=new URL(function(e,t="",r={}){return t.endsWith("/")&&(t=t.slice(0,-1)),r.prependPathname?`${t}/.well-known/${e}`:`/.well-known/${e}${t}`}(t,d.pathname),null!=(s=null==a?void 0:a.metadataServerUrl)?s:d)).search=d.search;let c=await aT(l,u,r);if(!(null==a?void 0:a.metadataUrl)&&(i=c,o=d.pathname,!i||i.status>=400&&i.status<500&&"/"!==o)){let e=new URL(`/.well-known/${t}`,d);c=await aT(e,u,r)}return c}async function aE(e,{fetchFn:t=fetch,protocolVersion:r=tf}={}){var a;let n={"MCP-Protocol-Version":r};for(let{url:r,type:s}of function(e){let t="string"==typeof e?new URL(e):e,r="/"!==t.pathname,a=[];if(!r)return a.push({url:new URL("/.well-known/oauth-authorization-server",t.origin),type:"oauth"}),a.push({url:new URL("/.well-known/openid-configuration",t.origin),type:"oidc"}),a;let n=t.pathname;return n.endsWith("/")&&(n=n.slice(0,-1)),a.push({url:new URL(`/.well-known/oauth-authorization-server${n}`,t.origin),type:"oauth"}),a.push({url:new URL("/.well-known/oauth-authorization-server",t.origin),type:"oauth"}),a.push({url:new URL(`/.well-known/openid-configuration${n}`,t.origin),type:"oidc"}),a.push({url:new URL(`${n}/.well-known/openid-configuration`,t.origin),type:"oidc"}),a}(e)){let e=await ak(r,n,t);if(e){if(!e.ok){if(e.status>=400&&e.status<500)continue;throw Error(`HTTP ${e.status} trying to load ${"oauth"===s?"OAuth":"OpenID provider"} metadata from ${r}`)}if("oauth"===s)return r0.parse(await e.json());{let t=r1.parse(await e.json());if(!(null==(a=t.code_challenge_methods_supported)?void 0:a.includes("S256")))throw Error(`Incompatible OIDC provider at ${r}: does not support S256 code challenge method required by MCP specification`);return t}}}}async function aZ(e,{metadata:t,clientInformation:r,redirectUrl:a,scope:n,state:s,resource:i}){let o,l="code",d="S256";if(t){if(o=new URL(t.authorization_endpoint),!t.response_types_supported.includes(l))throw Error(`Incompatible auth server: does not support response type ${l}`);if(!t.code_challenge_methods_supported||!t.code_challenge_methods_supported.includes(d))throw Error(`Incompatible auth server: does not support code challenge method ${d}`)}else o=new URL("/authorize",e);let u=await rG(),c=u.code_verifier,p=u.code_challenge;return o.searchParams.set("response_type",l),o.searchParams.set("client_id",r.client_id),o.searchParams.set("code_challenge",p),o.searchParams.set("code_challenge_method",d),o.searchParams.set("redirect_uri",String(a)),s&&o.searchParams.set("state",s),n&&o.searchParams.set("scope",n),(null==n?void 0:n.includes("offline_access"))&&o.searchParams.append("prompt","consent"),i&&o.searchParams.set("resource",i.href),{authorizationUrl:o,codeVerifier:c}}async function aO(e,{metadata:t,clientInformation:r,authorizationCode:a,codeVerifier:n,redirectUri:s,resource:i,addClientAuthentication:o,fetchFn:l}){var d;let u="authorization_code",c=(null==t?void 0:t.token_endpoint)?new URL(t.token_endpoint):new URL("/token",e);if((null==t?void 0:t.grant_types_supported)&&!t.grant_types_supported.includes(u))throw Error(`Incompatible auth server: does not support grant type ${u}`);let p=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}),h=new URLSearchParams({grant_type:u,code:a,code_verifier:n,redirect_uri:String(s)});o?o(p,h,e,t):ag(a_(r,null!=(d=null==t?void 0:t.token_endpoint_auth_methods_supported)?d:[]),r,p,h),i&&h.set("resource",i.href);let m=await (null!=l?l:fetch)(c,{method:"POST",headers:p,body:h});if(!m.ok)throw await ay(m);return r9.parse(await m.json())}async function aj(e,{metadata:t,clientInformation:r,refreshToken:a,resource:n,addClientAuthentication:s,fetchFn:i}){var o;let l,d="refresh_token";if(t){if(l=new URL(t.token_endpoint),t.grant_types_supported&&!t.grant_types_supported.includes(d))throw Error(`Incompatible auth server: does not support grant type ${d}`)}else l=new URL("/token",e);let u=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),c=new URLSearchParams({grant_type:d,refresh_token:a});s?s(u,c,e,t):ag(a_(r,null!=(o=null==t?void 0:t.token_endpoint_auth_methods_supported)?o:[]),r,u,c),n&&c.set("resource",n.href);let p=await (null!=i?i:fetch)(l,{method:"POST",headers:u,body:c});if(!p.ok)throw await ay(p);return r9.parse({refresh_token:a,...await p.json()})}async function aS(e,{metadata:t,clientMetadata:r,fetchFn:a}){let n;if(t){if(!t.registration_endpoint)throw Error("Incompatible auth server: does not support dynamic client registration");n=new URL(t.registration_endpoint)}else n=new URL("/register",e);let s=await (null!=a?a:fetch)(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw await ay(s);return r5.parse(await s.json())}class aA extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function aP(e){}class aR extends TransformStream{constructor({onError:e,onRetry:t,onComment:r}={}){let a;super({start(n){a=function(e){if("function"==typeof e)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=aP,onError:r=aP,onRetry:a=aP,onComment:n}=e,s="",i=!0,o,l="",d="";function u(e){if(""===e)return void(l.length>0&&t({id:o,event:d||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),o=void 0,l="",d="");if(e.startsWith(":")){n&&n(e.slice(e.startsWith(": ")?2:1));return}let r=e.indexOf(":");if(-1!==r){let t=e.slice(0,r),a=" "===e[r+1]?2:1;c(t,e.slice(r+a),e);return}c(e,"",e)}function c(e,t,n){switch(e){case"event":d=t;break;case"data":l=`${l}${t}
`;break;case"id":o=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?a(parseInt(t,10)):r(new aA(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:n}));break;default:r(new aA(`Unknown field "${e.length>20?`${e.slice(0,20)}\u2026`:e}"`,{type:"unknown-field",field:e,value:t,line:n}))}}return{feed:function(e){let t=i?e.replace(/^\xEF\xBB\xBF/,""):e,[r,a]=function(e){let t=[],r="",a=0;for(;a<e.length;){let n=e.indexOf("\r",a),s=e.indexOf(`
`,a),i=-1;if(-1!==n&&-1!==s?i=Math.min(n,s):-1!==n?i=n===e.length-1?-1:n:-1!==s&&(i=s),-1===i){r=e.slice(a);break}{let r=e.slice(a,i);t.push(r),"\r"===e[(a=i+1)-1]&&e[a]===`
`&&a++}}return[t,r]}(`${s}${t}`);for(let e of r)u(e);s=a,i=!1},reset:function(e={}){s&&e.consume&&u(s),i=!0,o=void 0,l="",d="",s=""}}}({onEvent:e=>{n.enqueue(e)},onError(t){"terminate"===e?n.error(t):"function"==typeof e&&e(t)},onRetry:t,onComment:r})},transform(e){a.feed(e)}})}}let aN={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2};class aI extends Error{constructor(e,t){super(`Streamable HTTP error: ${t}`),this.code=e}}class a${constructor(e,t){var r;this._url=e,this._resourceMetadataUrl=void 0,this._requestInit=null==t?void 0:t.requestInit,this._authProvider=null==t?void 0:t.authProvider,this._fetch=null==t?void 0:t.fetch,this._sessionId=null==t?void 0:t.sessionId,this._reconnectionOptions=null!=(r=null==t?void 0:t.reconnectionOptions)?r:aN}async _authThenStart(){var e;let t;if(!this._authProvider)throw new af("No auth provider");try{t=await av(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})}catch(t){throw null==(e=this.onerror)||e.call(this,t),t}if("AUTHORIZED"!==t)throw new af;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let t={};if(this._authProvider){let e=await this._authProvider.tokens();e&&(t.Authorization=`Bearer ${e.access_token}`)}this._sessionId&&(t["mcp-session-id"]=this._sessionId),this._protocolVersion&&(t["mcp-protocol-version"]=this._protocolVersion);let r=this._normalizeHeaders(null==(e=this._requestInit)?void 0:e.headers);return new Headers({...t,...r})}async _startOrAuthSse(e){var t,r,a;let{resumptionToken:n}=e;try{let a=await this._commonHeaders();a.set("Accept","text/event-stream"),n&&a.set("last-event-id",n);let s=await (null!=(t=this._fetch)?t:fetch)(this._url,{method:"GET",headers:a,signal:null==(r=this._abortController)?void 0:r.signal});if(!s.ok){if(401===s.status&&this._authProvider)return await this._authThenStart();if(405===s.status)return;throw new aI(s.status,`Failed to open SSE stream: ${s.statusText}`)}this._handleSseStream(s.body,e,!0)}catch(e){throw null==(a=this.onerror)||a.call(this,e),e}}_getNextReconnectionDelay(e){let t=this._reconnectionOptions.initialReconnectionDelay;return Math.min(t*Math.pow(this._reconnectionOptions.reconnectionDelayGrowFactor,e),this._reconnectionOptions.maxReconnectionDelay)}_normalizeHeaders(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):{...e}:{}}_scheduleReconnection(e,t=0){var r;let a=this._reconnectionOptions.maxRetries;if(a>0&&t>=a){null==(r=this.onerror)||r.call(this,Error(`Maximum reconnection attempts (${a}) exceeded.`));return}setTimeout(()=>{this._startOrAuthSse(e).catch(r=>{var a;null==(a=this.onerror)||a.call(this,Error(`Failed to reconnect SSE stream: ${r instanceof Error?r.message:String(r)}`)),this._scheduleReconnection(e,t+1)})},this._getNextReconnectionDelay(t))}_handleSseStream(e,t,r){let a;if(!e)return;let{onresumptiontoken:n,replayMessageId:s}=t;(async()=>{var t,i,o,l;try{let r=e.pipeThrough(new TextDecoderStream).pipeThrough(new aR).getReader();for(;;){let{value:e,done:o}=await r.read();if(o)break;if(e.id&&(a=e.id,null==n||n(e.id)),!e.event||"message"===e.event)try{let r=tN.parse(JSON.parse(e.data));void 0!==s&&tA(r)&&(r.id=s),null==(t=this.onmessage)||t.call(this,r)}catch(e){null==(i=this.onerror)||i.call(this,e)}}}catch(e){if(null==(o=this.onerror)||o.call(this,Error(`SSE stream disconnected: ${e}`)),r&&this._abortController&&!this._abortController.signal.aborted)try{this._scheduleReconnection({resumptionToken:a,onresumptiontoken:n,replayMessageId:s},0)}catch(e){null==(l=this.onerror)||l.call(this,Error(`Failed to reconnect: ${e instanceof Error?e.message:String(e)}`))}}})()}async start(){if(this._abortController)throw Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new af("No auth provider");if("AUTHORIZED"!==await av(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch}))throw new af("Failed to authorize")}async close(){var e,t;null==(e=this._abortController)||e.abort(),null==(t=this.onclose)||t.call(this)}async send(e,t){var r,a,n,s;try{let{resumptionToken:s,onresumptiontoken:i}=t||{};if(s)return void this._startOrAuthSse({resumptionToken:s,replayMessageId:tO(e)?e.id:void 0}).catch(e=>{var t;return null==(t=this.onerror)?void 0:t.call(this,e)});let o=await this._commonHeaders();o.set("content-type","application/json"),o.set("accept","application/json, text/event-stream");let l={...this._requestInit,method:"POST",headers:o,body:JSON.stringify(e),signal:null==(r=this._abortController)?void 0:r.signal},d=await (null!=(a=this._fetch)?a:fetch)(this._url,l),u=d.headers.get("mcp-session-id");if(u&&(this._sessionId=u),!d.ok){if(401===d.status&&this._authProvider){this._resourceMetadataUrl=function(e){let t=e.headers.get("WWW-Authenticate");if(!t)return;let[r,a]=t.split(" ");if("bearer"!==r.toLowerCase()||!a)return;let n=/resource_metadata="([^"]*)"/.exec(t);if(n)try{return new URL(n[1])}catch(e){return}}(d);let t=await av(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch});if("AUTHORIZED"!==t)throw new af;return this.send(e)}let t=await d.text().catch(()=>null);throw Error(`Error POSTing to endpoint (HTTP ${d.status}): ${t}`)}if(202===d.status){tH(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(e=>{var t;return null==(t=this.onerror)?void 0:t.call(this,e)});return}let c=(Array.isArray(e)?e:[e]).filter(e=>"method"in e&&"id"in e&&void 0!==e.id).length>0,p=d.headers.get("content-type");if(c)if(null==p?void 0:p.includes("text/event-stream"))this._handleSseStream(d.body,{onresumptiontoken:i},!1);else if(null==p?void 0:p.includes("application/json")){let e=await d.json();for(let t of Array.isArray(e)?e.map(e=>tN.parse(e)):[tN.parse(e)])null==(n=this.onmessage)||n.call(this,t)}else throw new aI(-1,`Unexpected content type: ${p}`)}catch(e){throw null==(s=this.onerror)||s.call(this,e),e}}get sessionId(){return this._sessionId}async terminateSession(){var e,t,r;if(this._sessionId)try{let r=await this._commonHeaders(),a={...this._requestInit,method:"DELETE",headers:r,signal:null==(e=this._abortController)?void 0:e.signal},n=await (null!=(t=this._fetch)?t:fetch)(this._url,a);if(!n.ok&&405!==n.status)throw new aI(n.status,`Failed to terminate session: ${n.statusText}`);this._sessionId=void 0}catch(e){throw null==(r=this.onerror)||r.call(this,e),e}}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}}e.s(["StdioClientTransport",()=>az],69316);var aU=e.i(52543),aL=e.i(59639),aM=e.i(81111);class aD{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){var e;if(!this._buffer)return null;let t=this._buffer.indexOf("\n");if(-1===t)return null;let r=this._buffer.toString("utf8",0,t).replace(/\r$/,"");return this._buffer=this._buffer.subarray(t+1),e=r,tN.parse(JSON.parse(e))}clear(){this._buffer=void 0}}let aF="win32"===aL.default.platform?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE","PROGRAMFILES"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];class az{constructor(e){this._abortController=new AbortController,this._readBuffer=new aD,this._stderrStream=null,this._serverParams=e,("pipe"===e.stderr||"overlapped"===e.stderr)&&(this._stderrStream=new aM.PassThrough)}async start(){if(this._process)throw Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,t)=>{var r,a,n,s,i;this._process=(0,aU.default)(this._serverParams.command,null!=(r=this._serverParams.args)?r:[],{env:{...function(){let e={};for(let t of aF){let r=aL.default.env[t];void 0!==r&&(r.startsWith("()")||(e[t]=r))}return e}(),...this._serverParams.env},stdio:["pipe","pipe",null!=(a=this._serverParams.stderr)?a:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:"win32"===aL.default.platform&&"type"in aL.default,cwd:this._serverParams.cwd}),this._process.on("error",e=>{var r,a;if("AbortError"===e.name){null==(r=this.onclose)||r.call(this);return}t(e),null==(a=this.onerror)||a.call(this,e)}),this._process.on("spawn",()=>{e()}),this._process.on("close",e=>{var t;this._process=void 0,null==(t=this.onclose)||t.call(this)}),null==(n=this._process.stdin)||n.on("error",e=>{var t;null==(t=this.onerror)||t.call(this,e)}),null==(s=this._process.stdout)||s.on("data",e=>{this._readBuffer.append(e),this.processReadBuffer()}),null==(i=this._process.stdout)||i.on("error",e=>{var t;null==(t=this.onerror)||t.call(this,e)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,t;return this._stderrStream?this._stderrStream:null!=(t=null==(e=this._process)?void 0:e.stderr)?t:null}get pid(){var e,t;return null!=(t=null==(e=this._process)?void 0:e.pid)?t:null}processReadBuffer(){for(var e,t;;)try{let t=this._readBuffer.readMessage();if(null===t)break;null==(e=this.onmessage)||e.call(this,t)}catch(e){null==(t=this.onerror)||t.call(this,e)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(t=>{var r;if(!(null==(r=this._process)?void 0:r.stdin))throw Error("Not connected");let a=JSON.stringify(e)+"\n";this._process.stdin.write(a)?t():this._process.stdin.once("drain",t)})}}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2d71f439._.js.map